{"id":"i-30fj","uuid":"78bbe520-66da-4444-821b-f885df9245bc","title":"Complete Protobuf Definitions for All Services","content":"## Overview\nCreate complete, compilable `.proto` files for all services with full message definitions, enums, and service contracts. These definitions are **critical** for implementation and must be completed before any service implementation begins.\n\n## Scope\n\nAll protobuf messages referenced in the service specs must be defined in compilable `.proto` files.\n\n### Files to Create\n\n1. **`protos/payments/v1/common.proto`** - Common types, enums, metadata\n2. **`protos/payments/v1/payment_token.proto`** - Payment Token Service messages\n3. **`protos/payments/v1/authorization.proto`** - Authorization API messages\n4. **`protos/payments/v1/events.proto`** - All event message definitions\n\n### Required Messages\n\n#### Common Types (`common.proto`)\n- `Money`\n- `Timestamp`\n- `Address`\n- `EventMetadata`\n- `ErrorDetails`\n- `AuthStatus` enum\n- `VoidStatus` enum\n\n#### Payment Token Service (`payment_token.proto`)\n- `CreatePaymentTokenRequest`\n- `CreatePaymentTokenResponse`\n- `GetPaymentTokenRequest`\n- `GetPaymentTokenResponse`\n- `DecryptPaymentTokenRequest`\n- `DecryptPaymentTokenResponse`\n- `PaymentData`\n\n#### Authorization API (`authorization.proto`)\n- `AuthorizeRequest`\n- `AuthorizeResponse`\n- `GetAuthStatusRequest`\n- `GetAuthStatusResponse`\n- `VoidAuthRequest`\n- `VoidAuthResponse`\n- `AuthorizationResult`\n\n#### Events (`events.proto`)\n- `AuthRequestCreated`\n- `AuthRequestQueued` (or just JSON in outbox - TBD)\n- `AuthAttemptStarted`\n- `AuthResponseReceived`\n- `AuthAttemptFailed`\n- `AuthVoidRequested`\n- `AuthRequestExpired`\n\n## Acceptance Criteria\n\n- [ ] All `.proto` files compile with `protoc`\n- [ ] Python code generation works: `python -m grpc_tools.protoc`\n- [ ] All messages have field numbers assigned\n- [ ] All enums have values starting at 0 (with _UNSPECIFIED)\n- [ ] Comments/documentation for each message and field\n- [ ] Import statements correct (e.g., `import \"payments/v1/common.proto\"`)\n- [ ] Package names consistent: `payments.v1`\n\n## Implementation Steps\n\n1. Create `protos/` directory structure\n2. Define `common.proto` first (shared types)\n3. Define service-specific protos (importing common)\n4. Define `events.proto` (importing common + service types)\n5. Test compilation: `protoc --python_out=. --grpc_python_out=. protos/payments/v1/*.proto`\n6. Generate Python stubs and verify no errors\n\n## Dependencies\n\n**Blocks:**\n- [[s-7ujm]] Payment Token Service implementation\n- [[s-9jeq]] Authorization API Service implementation\n- [[s-w5sf]] Auth Processor Worker Service implementation\n\n## Priority\n\n**CRITICAL / P0** - No implementation can proceed without these definitions.\n\n## Notes\n\n- Follow [Google's Protobuf Style Guide](https://protobuf.dev/programming-guides/style/)\n- Use `snake_case` for field names\n- Use `CamelCase` for message names\n- Include version in package name (`payments.v1`)\n- Consider forward/backward compatibility (don't reuse field numbers)","status":"open","priority":0,"assignee":null,"archived":0,"archived_at":null,"created_at":"2025-11-10 06:47:27","updated_at":"2025-11-10 06:47:27","closed_at":null,"parent_id":null,"parent_uuid":null,"relationships":[{"from":"i-30fj","from_type":"issue","to":"s-w5sf","to_type":"spec","type":"blocks"},{"from":"i-30fj","from_type":"issue","to":"s-9jeq","to_type":"spec","type":"blocks"},{"from":"i-30fj","from_type":"issue","to":"s-7ujm","to_type":"spec","type":"blocks"}],"tags":["blocking","critical","protobuf"]}
